/*! For license information please see mopidy-queue-card.js.LICENSE.txt */
const t=globalThis,e=t.ShadowRoot&&(void 0===t.ShadyCSS||t.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,i=Symbol(),o=new WeakMap;class n{constructor(t,e,o){if(this._$cssResult$=!0,o!==i)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=t,this.t=e}get styleSheet(){let t=this.o;const i=this.t;if(e&&void 0===t){const e=void 0!==i&&1===i.length;e&&(t=o.get(i)),void 0===t&&((this.o=t=new CSSStyleSheet).replaceSync(this.cssText),e&&o.set(i,t))}return t}toString(){return this.cssText}}const r=(i,o)=>{if(e)i.adoptedStyleSheets=o.map(t=>t instanceof CSSStyleSheet?t:t.styleSheet);else for(const e of o){const o=document.createElement("style"),n=t.litNonce;void 0!==n&&o.setAttribute("nonce",n),o.textContent=e.cssText,i.appendChild(o)}},a=e?t=>t:t=>t instanceof CSSStyleSheet?(t=>{let e="";for(const i of t.cssRules)e+=i.cssText;return(t=>new n("string"==typeof t?t:t+"",void 0,i))(e)})(t):t,{is:s,defineProperty:l,getOwnPropertyDescriptor:c,getOwnPropertyNames:d,getOwnPropertySymbols:h,getPrototypeOf:u}=Object,p=globalThis,f=p.trustedTypes,g=f?f.emptyScript:"",v=p.reactiveElementPolyfillSupport,m=(t,e)=>t,b={toAttribute(t,e){switch(e){case Boolean:t=t?g:null;break;case Object:case Array:t=null==t?t:JSON.stringify(t)}return t},fromAttribute(t,e){let i=t;switch(e){case Boolean:i=null!==t;break;case Number:i=null===t?null:Number(t);break;case Object:case Array:try{i=JSON.parse(t)}catch(t){i=null}}return i}},y=(t,e)=>!s(t,e),_={attribute:!0,type:String,converter:b,reflect:!1,useDefault:!1,hasChanged:y};Symbol.metadata??=Symbol("metadata"),p.litPropertyMetadata??=new WeakMap;class w extends HTMLElement{static addInitializer(t){this._$Ei(),(this.l??=[]).push(t)}static get observedAttributes(){return this.finalize(),this._$Eh&&[...this._$Eh.keys()]}static createProperty(t,e=_){if(e.state&&(e.attribute=!1),this._$Ei(),this.prototype.hasOwnProperty(t)&&((e=Object.create(e)).wrapped=!0),this.elementProperties.set(t,e),!e.noAccessor){const i=Symbol(),o=this.getPropertyDescriptor(t,i,e);void 0!==o&&l(this.prototype,t,o)}}static getPropertyDescriptor(t,e,i){const{get:o,set:n}=c(this.prototype,t)??{get(){return this[e]},set(t){this[e]=t}};return{get:o,set(e){const r=o?.call(this);n?.call(this,e),this.requestUpdate(t,r,i)},configurable:!0,enumerable:!0}}static getPropertyOptions(t){return this.elementProperties.get(t)??_}static _$Ei(){if(this.hasOwnProperty(m("elementProperties")))return;const t=u(this);t.finalize(),void 0!==t.l&&(this.l=[...t.l]),this.elementProperties=new Map(t.elementProperties)}static finalize(){if(this.hasOwnProperty(m("finalized")))return;if(this.finalized=!0,this._$Ei(),this.hasOwnProperty(m("properties"))){const t=this.properties,e=[...d(t),...h(t)];for(const i of e)this.createProperty(i,t[i])}const t=this[Symbol.metadata];if(null!==t){const e=litPropertyMetadata.get(t);if(void 0!==e)for(const[t,i]of e)this.elementProperties.set(t,i)}this._$Eh=new Map;for(const[t,e]of this.elementProperties){const i=this._$Eu(t,e);void 0!==i&&this._$Eh.set(i,t)}this.elementStyles=this.finalizeStyles(this.styles)}static finalizeStyles(t){const e=[];if(Array.isArray(t)){const i=new Set(t.flat(1/0).reverse());for(const t of i)e.unshift(a(t))}else void 0!==t&&e.push(a(t));return e}static _$Eu(t,e){const i=e.attribute;return!1===i?void 0:"string"==typeof i?i:"string"==typeof t?t.toLowerCase():void 0}constructor(){super(),this._$Ep=void 0,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Em=null,this._$Ev()}_$Ev(){this._$ES=new Promise(t=>this.enableUpdating=t),this._$AL=new Map,this._$E_(),this.requestUpdate(),this.constructor.l?.forEach(t=>t(this))}addController(t){(this._$EO??=new Set).add(t),void 0!==this.renderRoot&&this.isConnected&&t.hostConnected?.()}removeController(t){this._$EO?.delete(t)}_$E_(){const t=new Map,e=this.constructor.elementProperties;for(const i of e.keys())this.hasOwnProperty(i)&&(t.set(i,this[i]),delete this[i]);t.size>0&&(this._$Ep=t)}createRenderRoot(){const t=this.shadowRoot??this.attachShadow(this.constructor.shadowRootOptions);return r(t,this.constructor.elementStyles),t}connectedCallback(){this.renderRoot??=this.createRenderRoot(),this.enableUpdating(!0),this._$EO?.forEach(t=>t.hostConnected?.())}enableUpdating(t){}disconnectedCallback(){this._$EO?.forEach(t=>t.hostDisconnected?.())}attributeChangedCallback(t,e,i){this._$AK(t,i)}_$ET(t,e){const i=this.constructor.elementProperties.get(t),o=this.constructor._$Eu(t,i);if(void 0!==o&&!0===i.reflect){const n=(void 0!==i.converter?.toAttribute?i.converter:b).toAttribute(e,i.type);this._$Em=t,null==n?this.removeAttribute(o):this.setAttribute(o,n),this._$Em=null}}_$AK(t,e){const i=this.constructor,o=i._$Eh.get(t);if(void 0!==o&&this._$Em!==o){const t=i.getPropertyOptions(o),n="function"==typeof t.converter?{fromAttribute:t.converter}:void 0!==t.converter?.fromAttribute?t.converter:b;this._$Em=o;const r=n.fromAttribute(e,t.type);this[o]=r??this._$Ej?.get(o)??r,this._$Em=null}}requestUpdate(t,e,i){if(void 0!==t){const o=this.constructor,n=this[t];if(i??=o.getPropertyOptions(t),!((i.hasChanged??y)(n,e)||i.useDefault&&i.reflect&&n===this._$Ej?.get(t)&&!this.hasAttribute(o._$Eu(t,i))))return;this.C(t,e,i)}!1===this.isUpdatePending&&(this._$ES=this._$EP())}C(t,e,{useDefault:i,reflect:o,wrapped:n},r){i&&!(this._$Ej??=new Map).has(t)&&(this._$Ej.set(t,r??e??this[t]),!0!==n||void 0!==r)||(this._$AL.has(t)||(this.hasUpdated||i||(e=void 0),this._$AL.set(t,e)),!0===o&&this._$Em!==t&&(this._$Eq??=new Set).add(t))}async _$EP(){this.isUpdatePending=!0;try{await this._$ES}catch(t){Promise.reject(t)}const t=this.scheduleUpdate();return null!=t&&await t,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){if(!this.isUpdatePending)return;if(!this.hasUpdated){if(this.renderRoot??=this.createRenderRoot(),this._$Ep){for(const[t,e]of this._$Ep)this[t]=e;this._$Ep=void 0}const t=this.constructor.elementProperties;if(t.size>0)for(const[e,i]of t){const{wrapped:t}=i,o=this[e];!0!==t||this._$AL.has(e)||void 0===o||this.C(e,void 0,i,o)}}let t=!1;const e=this._$AL;try{t=this.shouldUpdate(e),t?(this.willUpdate(e),this._$EO?.forEach(t=>t.hostUpdate?.()),this.update(e)):this._$EM()}catch(e){throw t=!1,this._$EM(),e}t&&this._$AE(e)}willUpdate(t){}_$AE(t){this._$EO?.forEach(t=>t.hostUpdated?.()),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(t)),this.updated(t)}_$EM(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$ES}shouldUpdate(t){return!0}update(t){this._$Eq&&=this._$Eq.forEach(t=>this._$ET(t,this[t])),this._$EM()}updated(t){}firstUpdated(t){}}w.elementStyles=[],w.shadowRootOptions={mode:"open"},w[m("elementProperties")]=new Map,w[m("finalized")]=new Map,v?.({ReactiveElement:w}),(p.reactiveElementVersions??=[]).push("2.1.1");const E=globalThis,S=E.trustedTypes,$=S?S.createPolicy("lit-html",{createHTML:t=>t}):void 0,A="$lit$",x=`lit$${Math.random().toFixed(9).slice(2)}$`,D="?"+x,C=`<${D}>`,T=document,k=()=>T.createComment(""),P=t=>null===t||"object"!=typeof t&&"function"!=typeof t,O=Array.isArray,M="[ \t\n\f\r]",N=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,I=/-->/g,R=/>/g,U=RegExp(`>|${M}(?:([^\\s"'>=/]+)(${M}*=${M}*(?:[^ \t\n\f\r"'\`<>=]|("|')|))|$)`,"g"),H=/'/g,j=/"/g,L=/^(?:script|style|textarea|title)$/i,B=t=>(e,...i)=>({_$litType$:t,strings:e,values:i}),z=B(1),q=(B(2),B(3),Symbol.for("lit-noChange")),X=Symbol.for("lit-nothing"),Y=new WeakMap,F=T.createTreeWalker(T,129);function W(t,e){if(!O(t)||!t.hasOwnProperty("raw"))throw Error("invalid template strings array");return void 0!==$?$.createHTML(e):e}const V=(t,e)=>{const i=t.length-1,o=[];let n,r=2===e?"<svg>":3===e?"<math>":"",a=N;for(let e=0;e<i;e++){const i=t[e];let s,l,c=-1,d=0;for(;d<i.length&&(a.lastIndex=d,l=a.exec(i),null!==l);)d=a.lastIndex,a===N?"!--"===l[1]?a=I:void 0!==l[1]?a=R:void 0!==l[2]?(L.test(l[2])&&(n=RegExp("</"+l[2],"g")),a=U):void 0!==l[3]&&(a=U):a===U?">"===l[0]?(a=n??N,c=-1):void 0===l[1]?c=-2:(c=a.lastIndex-l[2].length,s=l[1],a=void 0===l[3]?U:'"'===l[3]?j:H):a===j||a===H?a=U:a===I||a===R?a=N:(a=U,n=void 0);const h=a===U&&t[e+1].startsWith("/>")?" ":"";r+=a===N?i+C:c>=0?(o.push(s),i.slice(0,c)+A+i.slice(c)+x+h):i+x+(-2===c?e:h)}return[W(t,r+(t[i]||"<?>")+(2===e?"</svg>":3===e?"</math>":"")),o]};class G{constructor({strings:t,_$litType$:e},i){let o;this.parts=[];let n=0,r=0;const a=t.length-1,s=this.parts,[l,c]=V(t,e);if(this.el=G.createElement(l,i),F.currentNode=this.el.content,2===e||3===e){const t=this.el.content.firstChild;t.replaceWith(...t.childNodes)}for(;null!==(o=F.nextNode())&&s.length<a;){if(1===o.nodeType){if(o.hasAttributes())for(const t of o.getAttributeNames())if(t.endsWith(A)){const e=c[r++],i=o.getAttribute(t).split(x),a=/([.?@])?(.*)/.exec(e);s.push({type:1,index:n,name:a[2],strings:i,ctor:"."===a[1]?tt:"?"===a[1]?et:"@"===a[1]?it:J}),o.removeAttribute(t)}else t.startsWith(x)&&(s.push({type:6,index:n}),o.removeAttribute(t));if(L.test(o.tagName)){const t=o.textContent.split(x),e=t.length-1;if(e>0){o.textContent=S?S.emptyScript:"";for(let i=0;i<e;i++)o.append(t[i],k()),F.nextNode(),s.push({type:2,index:++n});o.append(t[e],k())}}}else if(8===o.nodeType)if(o.data===D)s.push({type:2,index:n});else{let t=-1;for(;-1!==(t=o.data.indexOf(x,t+1));)s.push({type:7,index:n}),t+=x.length-1}n++}}static createElement(t,e){const i=T.createElement("template");return i.innerHTML=t,i}}function Z(t,e,i=t,o){if(e===q)return e;let n=void 0!==o?i._$Co?.[o]:i._$Cl;const r=P(e)?void 0:e._$litDirective$;return n?.constructor!==r&&(n?._$AO?.(!1),void 0===r?n=void 0:(n=new r(t),n._$AT(t,i,o)),void 0!==o?(i._$Co??=[])[o]=n:i._$Cl=n),void 0!==n&&(e=Z(t,n._$AS(t,e.values),n,o)),e}class K{constructor(t,e){this._$AV=[],this._$AN=void 0,this._$AD=t,this._$AM=e}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(t){const{el:{content:e},parts:i}=this._$AD,o=(t?.creationScope??T).importNode(e,!0);F.currentNode=o;let n=F.nextNode(),r=0,a=0,s=i[0];for(;void 0!==s;){if(r===s.index){let e;2===s.type?e=new Q(n,n.nextSibling,this,t):1===s.type?e=new s.ctor(n,s.name,s.strings,this,t):6===s.type&&(e=new ot(n,this,t)),this._$AV.push(e),s=i[++a]}r!==s?.index&&(n=F.nextNode(),r++)}return F.currentNode=T,o}p(t){let e=0;for(const i of this._$AV)void 0!==i&&(void 0!==i.strings?(i._$AI(t,i,e),e+=i.strings.length-2):i._$AI(t[e])),e++}}class Q{get _$AU(){return this._$AM?._$AU??this._$Cv}constructor(t,e,i,o){this.type=2,this._$AH=X,this._$AN=void 0,this._$AA=t,this._$AB=e,this._$AM=i,this.options=o,this._$Cv=o?.isConnected??!0}get parentNode(){let t=this._$AA.parentNode;const e=this._$AM;return void 0!==e&&11===t?.nodeType&&(t=e.parentNode),t}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(t,e=this){t=Z(this,t,e),P(t)?t===X||null==t||""===t?(this._$AH!==X&&this._$AR(),this._$AH=X):t!==this._$AH&&t!==q&&this._(t):void 0!==t._$litType$?this.$(t):void 0!==t.nodeType?this.T(t):(t=>O(t)||"function"==typeof t?.[Symbol.iterator])(t)?this.k(t):this._(t)}O(t){return this._$AA.parentNode.insertBefore(t,this._$AB)}T(t){this._$AH!==t&&(this._$AR(),this._$AH=this.O(t))}_(t){this._$AH!==X&&P(this._$AH)?this._$AA.nextSibling.data=t:this.T(T.createTextNode(t)),this._$AH=t}$(t){const{values:e,_$litType$:i}=t,o="number"==typeof i?this._$AC(t):(void 0===i.el&&(i.el=G.createElement(W(i.h,i.h[0]),this.options)),i);if(this._$AH?._$AD===o)this._$AH.p(e);else{const t=new K(o,this),i=t.u(this.options);t.p(e),this.T(i),this._$AH=t}}_$AC(t){let e=Y.get(t.strings);return void 0===e&&Y.set(t.strings,e=new G(t)),e}k(t){O(this._$AH)||(this._$AH=[],this._$AR());const e=this._$AH;let i,o=0;for(const n of t)o===e.length?e.push(i=new Q(this.O(k()),this.O(k()),this,this.options)):i=e[o],i._$AI(n),o++;o<e.length&&(this._$AR(i&&i._$AB.nextSibling,o),e.length=o)}_$AR(t=this._$AA.nextSibling,e){for(this._$AP?.(!1,!0,e);t!==this._$AB;){const e=t.nextSibling;t.remove(),t=e}}setConnected(t){void 0===this._$AM&&(this._$Cv=t,this._$AP?.(t))}}class J{get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}constructor(t,e,i,o,n){this.type=1,this._$AH=X,this._$AN=void 0,this.element=t,this.name=e,this._$AM=o,this.options=n,i.length>2||""!==i[0]||""!==i[1]?(this._$AH=Array(i.length-1).fill(new String),this.strings=i):this._$AH=X}_$AI(t,e=this,i,o){const n=this.strings;let r=!1;if(void 0===n)t=Z(this,t,e,0),r=!P(t)||t!==this._$AH&&t!==q,r&&(this._$AH=t);else{const o=t;let a,s;for(t=n[0],a=0;a<n.length-1;a++)s=Z(this,o[i+a],e,a),s===q&&(s=this._$AH[a]),r||=!P(s)||s!==this._$AH[a],s===X?t=X:t!==X&&(t+=(s??"")+n[a+1]),this._$AH[a]=s}r&&!o&&this.j(t)}j(t){t===X?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,t??"")}}class tt extends J{constructor(){super(...arguments),this.type=3}j(t){this.element[this.name]=t===X?void 0:t}}class et extends J{constructor(){super(...arguments),this.type=4}j(t){this.element.toggleAttribute(this.name,!!t&&t!==X)}}class it extends J{constructor(t,e,i,o,n){super(t,e,i,o,n),this.type=5}_$AI(t,e=this){if((t=Z(this,t,e,0)??X)===q)return;const i=this._$AH,o=t===X&&i!==X||t.capture!==i.capture||t.once!==i.once||t.passive!==i.passive,n=t!==X&&(i===X||o);o&&this.element.removeEventListener(this.name,this,i),n&&this.element.addEventListener(this.name,this,t),this._$AH=t}handleEvent(t){"function"==typeof this._$AH?this._$AH.call(this.options?.host??this.element,t):this._$AH.handleEvent(t)}}class ot{constructor(t,e,i){this.element=t,this.type=6,this._$AN=void 0,this._$AM=e,this.options=i}get _$AU(){return this._$AM._$AU}_$AI(t){Z(this,t)}}const nt=E.litHtmlPolyfillSupport;nt?.(G,Q),(E.litHtmlVersions??=[]).push("3.3.1");const rt=globalThis;class at extends w{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){const t=super.createRenderRoot();return this.renderOptions.renderBefore??=t.firstChild,t}update(t){const e=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(t),this._$Do=((t,e,i)=>{const o=i?.renderBefore??e;let n=o._$litPart$;if(void 0===n){const t=i?.renderBefore??null;o._$litPart$=n=new Q(e.insertBefore(k(),t),t,void 0,i??{})}return n._$AI(t),n})(e,this.renderRoot,this.renderOptions)}connectedCallback(){super.connectedCallback(),this._$Do?.setConnected(!0)}disconnectedCallback(){super.disconnectedCallback(),this._$Do?.setConnected(!1)}render(){return q}}at._$litElement$=!0,at.finalized=!0,rt.litElementHydrateSupport?.({LitElement:at});const st=rt.litElementPolyfillSupport;st?.({LitElement:at}),(rt.litElementVersions??=[]).push("4.2.1");const lt={attribute:!0,type:String,converter:b,reflect:!1,hasChanged:y},ct=(t=lt,e,i)=>{const{kind:o,metadata:n}=i;let r=globalThis.litPropertyMetadata.get(n);if(void 0===r&&globalThis.litPropertyMetadata.set(n,r=new Map),"setter"===o&&((t=Object.create(t)).wrapped=!0),r.set(i.name,t),"accessor"===o){const{name:o}=i;return{set(i){const n=e.get.call(this);e.set.call(this,i),this.requestUpdate(o,n,t)},init(e){return void 0!==e&&this.C(o,void 0,t,e),e}}}if("setter"===o){const{name:o}=i;return function(i){const n=this[o];e.call(this,i),this.requestUpdate(o,n,t)}}throw Error("Unsupported decorator location: "+o)};function dt(t){return(e,i)=>"object"==typeof i?ct(t,e,i):((t,e,i)=>{const o=e.hasOwnProperty(i);return e.constructor.createProperty(i,t),o?Object.getOwnPropertyDescriptor(e,i):void 0})(t,e,i)}function ht(t){return dt({...t,state:!0,attribute:!1})}function ut(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),i.push.apply(i,o)}return i}function pt(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?ut(Object(i),!0).forEach(function(e){gt(t,e,i[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):ut(Object(i)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))})}return t}function ft(t){return ft="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ft(t)}function gt(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function vt(){return vt=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(t[o]=i[o])}return t},vt.apply(this,arguments)}function mt(t){if("undefined"!=typeof window&&window.navigator)return!!navigator.userAgent.match(t)}var bt=mt(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),yt=mt(/Edge/i),_t=mt(/firefox/i),wt=mt(/safari/i)&&!mt(/chrome/i)&&!mt(/android/i),Et=mt(/iP(ad|od|hone)/i),St=mt(/chrome/i)&&mt(/android/i),$t={capture:!1,passive:!1};function At(t,e,i){t.addEventListener(e,i,!bt&&$t)}function xt(t,e,i){t.removeEventListener(e,i,!bt&&$t)}function Dt(t,e){if(e){if(">"===e[0]&&(e=e.substring(1)),t)try{if(t.matches)return t.matches(e);if(t.msMatchesSelector)return t.msMatchesSelector(e);if(t.webkitMatchesSelector)return t.webkitMatchesSelector(e)}catch(t){return!1}return!1}}function Ct(t){return t.host&&t!==document&&t.host.nodeType?t.host:t.parentNode}function Tt(t,e,i,o){if(t){i=i||document;do{if(null!=e&&(">"===e[0]?t.parentNode===i&&Dt(t,e):Dt(t,e))||o&&t===i)return t;if(t===i)break}while(t=Ct(t))}return null}var kt,Pt=/\s+/g;function Ot(t,e,i){if(t&&e)if(t.classList)t.classList[i?"add":"remove"](e);else{var o=(" "+t.className+" ").replace(Pt," ").replace(" "+e+" "," ");t.className=(o+(i?" "+e:"")).replace(Pt," ")}}function Mt(t,e,i){var o=t&&t.style;if(o){if(void 0===i)return document.defaultView&&document.defaultView.getComputedStyle?i=document.defaultView.getComputedStyle(t,""):t.currentStyle&&(i=t.currentStyle),void 0===e?i:i[e];e in o||-1!==e.indexOf("webkit")||(e="-webkit-"+e),o[e]=i+("string"==typeof i?"":"px")}}function Nt(t,e){var i="";if("string"==typeof t)i=t;else do{var o=Mt(t,"transform");o&&"none"!==o&&(i=o+" "+i)}while(!e&&(t=t.parentNode));var n=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return n&&new n(i)}function It(t,e,i){if(t){var o=t.getElementsByTagName(e),n=0,r=o.length;if(i)for(;n<r;n++)i(o[n],n);return o}return[]}function Rt(){return document.scrollingElement||document.documentElement}function Ut(t,e,i,o,n){if(t.getBoundingClientRect||t===window){var r,a,s,l,c,d,h;if(t!==window&&t.parentNode&&t!==Rt()?(a=(r=t.getBoundingClientRect()).top,s=r.left,l=r.bottom,c=r.right,d=r.height,h=r.width):(a=0,s=0,l=window.innerHeight,c=window.innerWidth,d=window.innerHeight,h=window.innerWidth),(e||i)&&t!==window&&(n=n||t.parentNode,!bt))do{if(n&&n.getBoundingClientRect&&("none"!==Mt(n,"transform")||i&&"static"!==Mt(n,"position"))){var u=n.getBoundingClientRect();a-=u.top+parseInt(Mt(n,"border-top-width")),s-=u.left+parseInt(Mt(n,"border-left-width")),l=a+r.height,c=s+r.width;break}}while(n=n.parentNode);if(o&&t!==window){var p=Nt(n||t),f=p&&p.a,g=p&&p.d;p&&(l=(a/=g)+(d/=g),c=(s/=f)+(h/=f))}return{top:a,left:s,bottom:l,right:c,width:h,height:d}}}function Ht(t,e,i){for(var o=qt(t,!0),n=Ut(t)[e];o;){var r=Ut(o)[i];if(!("top"===i||"left"===i?n>=r:n<=r))return o;if(o===Rt())break;o=qt(o,!1)}return!1}function jt(t,e,i,o){for(var n=0,r=0,a=t.children;r<a.length;){if("none"!==a[r].style.display&&a[r]!==Fe.ghost&&(o||a[r]!==Fe.dragged)&&Tt(a[r],i.draggable,t,!1)){if(n===e)return a[r];n++}r++}return null}function Lt(t,e){for(var i=t.lastElementChild;i&&(i===Fe.ghost||"none"===Mt(i,"display")||e&&!Dt(i,e));)i=i.previousElementSibling;return i||null}function Bt(t,e){var i=0;if(!t||!t.parentNode)return-1;for(;t=t.previousElementSibling;)"TEMPLATE"===t.nodeName.toUpperCase()||t===Fe.clone||e&&!Dt(t,e)||i++;return i}function zt(t){var e=0,i=0,o=Rt();if(t)do{var n=Nt(t),r=n.a,a=n.d;e+=t.scrollLeft*r,i+=t.scrollTop*a}while(t!==o&&(t=t.parentNode));return[e,i]}function qt(t,e){if(!t||!t.getBoundingClientRect)return Rt();var i=t,o=!1;do{if(i.clientWidth<i.scrollWidth||i.clientHeight<i.scrollHeight){var n=Mt(i);if(i.clientWidth<i.scrollWidth&&("auto"==n.overflowX||"scroll"==n.overflowX)||i.clientHeight<i.scrollHeight&&("auto"==n.overflowY||"scroll"==n.overflowY)){if(!i.getBoundingClientRect||i===document.body)return Rt();if(o||e)return i;o=!0}}}while(i=i.parentNode);return Rt()}function Xt(t,e){return Math.round(t.top)===Math.round(e.top)&&Math.round(t.left)===Math.round(e.left)&&Math.round(t.height)===Math.round(e.height)&&Math.round(t.width)===Math.round(e.width)}function Yt(t,e){return function(){if(!kt){var i=arguments;1===i.length?t.call(this,i[0]):t.apply(this,i),kt=setTimeout(function(){kt=void 0},e)}}}function Ft(t,e,i){t.scrollLeft+=e,t.scrollTop+=i}function Wt(t){var e=window.Polymer,i=window.jQuery||window.Zepto;return e&&e.dom?e.dom(t).cloneNode(!0):i?i(t).clone(!0)[0]:t.cloneNode(!0)}function Vt(t,e,i){var o={};return Array.from(t.children).forEach(function(n){var r,a,s,l;if(Tt(n,e.draggable,t,!1)&&!n.animated&&n!==i){var c=Ut(n);o.left=Math.min(null!==(r=o.left)&&void 0!==r?r:1/0,c.left),o.top=Math.min(null!==(a=o.top)&&void 0!==a?a:1/0,c.top),o.right=Math.max(null!==(s=o.right)&&void 0!==s?s:-1/0,c.right),o.bottom=Math.max(null!==(l=o.bottom)&&void 0!==l?l:-1/0,c.bottom)}}),o.width=o.right-o.left,o.height=o.bottom-o.top,o.x=o.left,o.y=o.top,o}var Gt="Sortable"+(new Date).getTime();var Zt=[],Kt={initializeByDefault:!0},Qt={mount:function(t){for(var e in Kt)Kt.hasOwnProperty(e)&&!(e in t)&&(t[e]=Kt[e]);Zt.forEach(function(e){if(e.pluginName===t.pluginName)throw"Sortable: Cannot mount plugin ".concat(t.pluginName," more than once")}),Zt.push(t)},pluginEvent:function(t,e,i){var o=this;this.eventCanceled=!1,i.cancel=function(){o.eventCanceled=!0};var n=t+"Global";Zt.forEach(function(o){e[o.pluginName]&&(e[o.pluginName][n]&&e[o.pluginName][n](pt({sortable:e},i)),e.options[o.pluginName]&&e[o.pluginName][t]&&e[o.pluginName][t](pt({sortable:e},i)))})},initializePlugins:function(t,e,i,o){for(var n in Zt.forEach(function(o){var n=o.pluginName;if(t.options[n]||o.initializeByDefault){var r=new o(t,e,t.options);r.sortable=t,r.options=t.options,t[n]=r,vt(i,r.defaults)}}),t.options)if(t.options.hasOwnProperty(n)){var r=this.modifyOption(t,n,t.options[n]);void 0!==r&&(t.options[n]=r)}},getEventProperties:function(t,e){var i={};return Zt.forEach(function(o){"function"==typeof o.eventProperties&&vt(i,o.eventProperties.call(e[o.pluginName],t))}),i},modifyOption:function(t,e,i){var o;return Zt.forEach(function(n){t[n.pluginName]&&n.optionListeners&&"function"==typeof n.optionListeners[e]&&(o=n.optionListeners[e].call(t[n.pluginName],i))}),o}};var Jt=["evt"],te=function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=i.evt,n=function(t,e){if(null==t)return{};var i,o,n=function(t,e){if(null==t)return{};var i,o,n={},r=Object.keys(t);for(o=0;o<r.length;o++)i=r[o],e.indexOf(i)>=0||(n[i]=t[i]);return n}(t,e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);for(o=0;o<r.length;o++)i=r[o],e.indexOf(i)>=0||Object.prototype.propertyIsEnumerable.call(t,i)&&(n[i]=t[i])}return n}(i,Jt);Qt.pluginEvent.bind(Fe)(t,e,pt({dragEl:ie,parentEl:oe,ghostEl:ne,rootEl:re,nextEl:ae,lastDownEl:se,cloneEl:le,cloneHidden:ce,dragStarted:Ee,putSortable:ge,activeSortable:Fe.active,originalEvent:o,oldIndex:de,oldDraggableIndex:ue,newIndex:he,newDraggableIndex:pe,hideGhostForTarget:ze,unhideGhostForTarget:qe,cloneNowHidden:function(){ce=!0},cloneNowShown:function(){ce=!1},dispatchSortableEvent:function(t){ee({sortable:e,name:t,originalEvent:o})}},n))};function ee(t){!function(t){var e=t.sortable,i=t.rootEl,o=t.name,n=t.targetEl,r=t.cloneEl,a=t.toEl,s=t.fromEl,l=t.oldIndex,c=t.newIndex,d=t.oldDraggableIndex,h=t.newDraggableIndex,u=t.originalEvent,p=t.putSortable,f=t.extraEventProperties;if(e=e||i&&i[Gt]){var g,v=e.options,m="on"+o.charAt(0).toUpperCase()+o.substr(1);!window.CustomEvent||bt||yt?(g=document.createEvent("Event")).initEvent(o,!0,!0):g=new CustomEvent(o,{bubbles:!0,cancelable:!0}),g.to=a||i,g.from=s||i,g.item=n||i,g.clone=r,g.oldIndex=l,g.newIndex=c,g.oldDraggableIndex=d,g.newDraggableIndex=h,g.originalEvent=u,g.pullMode=p?p.lastPutMode:void 0;var b=pt(pt({},f),Qt.getEventProperties(o,e));for(var y in b)g[y]=b[y];i&&i.dispatchEvent(g),v[m]&&v[m].call(e,g)}}(pt({putSortable:ge,cloneEl:le,targetEl:ie,rootEl:re,oldIndex:de,oldDraggableIndex:ue,newIndex:he,newDraggableIndex:pe},t))}var ie,oe,ne,re,ae,se,le,ce,de,he,ue,pe,fe,ge,ve,me,be,ye,_e,we,Ee,Se,$e,Ae,xe,De=!1,Ce=!1,Te=[],ke=!1,Pe=!1,Oe=[],Me=!1,Ne=[],Ie="undefined"!=typeof document,Re=Et,Ue=yt||bt?"cssFloat":"float",He=Ie&&!St&&!Et&&"draggable"in document.createElement("div"),je=function(){if(Ie){if(bt)return!1;var t=document.createElement("x");return t.style.cssText="pointer-events:auto","auto"===t.style.pointerEvents}}(),Le=function(t,e){var i=Mt(t),o=parseInt(i.width)-parseInt(i.paddingLeft)-parseInt(i.paddingRight)-parseInt(i.borderLeftWidth)-parseInt(i.borderRightWidth),n=jt(t,0,e),r=jt(t,1,e),a=n&&Mt(n),s=r&&Mt(r),l=a&&parseInt(a.marginLeft)+parseInt(a.marginRight)+Ut(n).width,c=s&&parseInt(s.marginLeft)+parseInt(s.marginRight)+Ut(r).width;if("flex"===i.display)return"column"===i.flexDirection||"column-reverse"===i.flexDirection?"vertical":"horizontal";if("grid"===i.display)return i.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(n&&a.float&&"none"!==a.float){var d="left"===a.float?"left":"right";return!r||"both"!==s.clear&&s.clear!==d?"horizontal":"vertical"}return n&&("block"===a.display||"flex"===a.display||"table"===a.display||"grid"===a.display||l>=o&&"none"===i[Ue]||r&&"none"===i[Ue]&&l+c>o)?"vertical":"horizontal"},Be=function(t){function e(t,i){return function(o,n,r,a){var s=o.options.group.name&&n.options.group.name&&o.options.group.name===n.options.group.name;if(null==t&&(i||s))return!0;if(null==t||!1===t)return!1;if(i&&"clone"===t)return t;if("function"==typeof t)return e(t(o,n,r,a),i)(o,n,r,a);var l=(i?o:n).options.group.name;return!0===t||"string"==typeof t&&t===l||t.join&&t.indexOf(l)>-1}}var i={},o=t.group;o&&"object"==ft(o)||(o={name:o}),i.name=o.name,i.checkPull=e(o.pull,!0),i.checkPut=e(o.put),i.revertClone=o.revertClone,t.group=i},ze=function(){!je&&ne&&Mt(ne,"display","none")},qe=function(){!je&&ne&&Mt(ne,"display","")};Ie&&!St&&document.addEventListener("click",function(t){if(Ce)return t.preventDefault(),t.stopPropagation&&t.stopPropagation(),t.stopImmediatePropagation&&t.stopImmediatePropagation(),Ce=!1,!1},!0);var Xe=function(t){if(ie){var e=function(t,e){var i;return Te.some(function(o){var n=o[Gt].options.emptyInsertThreshold;if(n&&!Lt(o)){var r=Ut(o),a=t>=r.left-n&&t<=r.right+n,s=e>=r.top-n&&e<=r.bottom+n;return a&&s?i=o:void 0}}),i}((t=t.touches?t.touches[0]:t).clientX,t.clientY);if(e){var i={};for(var o in t)t.hasOwnProperty(o)&&(i[o]=t[o]);i.target=i.rootEl=e,i.preventDefault=void 0,i.stopPropagation=void 0,e[Gt]._onDragOver(i)}}},Ye=function(t){ie&&ie.parentNode[Gt]._isOutsideThisEl(t.target)};function Fe(t,e){if(!t||!t.nodeType||1!==t.nodeType)throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(t));this.el=t,this.options=e=vt({},e),t[Gt]=this;var i,o,n={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(t.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return Le(t,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(t,e){t.setData("Text",e.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:!1!==Fe.supportPointer&&"PointerEvent"in window&&(!wt||Et),emptyInsertThreshold:5};for(var r in Qt.initializePlugins(this,t,n),n)!(r in e)&&(e[r]=n[r]);for(var a in Be(e),this)"_"===a.charAt(0)&&"function"==typeof this[a]&&(this[a]=this[a].bind(this));this.nativeDraggable=!e.forceFallback&&He,this.nativeDraggable&&(this.options.touchStartThreshold=1),e.supportPointer?At(t,"pointerdown",this._onTapStart):(At(t,"mousedown",this._onTapStart),At(t,"touchstart",this._onTapStart)),this.nativeDraggable&&(At(t,"dragover",this),At(t,"dragenter",this)),Te.push(this.el),e.store&&e.store.get&&this.sort(e.store.get(this)||[]),vt(this,(o=[],{captureAnimationState:function(){o=[],this.options.animation&&[].slice.call(this.el.children).forEach(function(t){if("none"!==Mt(t,"display")&&t!==Fe.ghost){o.push({target:t,rect:Ut(t)});var e=pt({},o[o.length-1].rect);if(t.thisAnimationDuration){var i=Nt(t,!0);i&&(e.top-=i.f,e.left-=i.e)}t.fromRect=e}})},addAnimationState:function(t){o.push(t)},removeAnimationState:function(t){o.splice(function(t,e){for(var i in t)if(t.hasOwnProperty(i))for(var o in e)if(e.hasOwnProperty(o)&&e[o]===t[i][o])return Number(i);return-1}(o,{target:t}),1)},animateAll:function(t){var e=this;if(!this.options.animation)return clearTimeout(i),void("function"==typeof t&&t());var n=!1,r=0;o.forEach(function(t){var i=0,o=t.target,a=o.fromRect,s=Ut(o),l=o.prevFromRect,c=o.prevToRect,d=t.rect,h=Nt(o,!0);h&&(s.top-=h.f,s.left-=h.e),o.toRect=s,o.thisAnimationDuration&&Xt(l,s)&&!Xt(a,s)&&(d.top-s.top)/(d.left-s.left)===(a.top-s.top)/(a.left-s.left)&&(i=function(t,e,i,o){return Math.sqrt(Math.pow(e.top-t.top,2)+Math.pow(e.left-t.left,2))/Math.sqrt(Math.pow(e.top-i.top,2)+Math.pow(e.left-i.left,2))*o.animation}(d,l,c,e.options)),Xt(s,a)||(o.prevFromRect=a,o.prevToRect=s,i||(i=e.options.animation),e.animate(o,d,s,i)),i&&(n=!0,r=Math.max(r,i),clearTimeout(o.animationResetTimer),o.animationResetTimer=setTimeout(function(){o.animationTime=0,o.prevFromRect=null,o.fromRect=null,o.prevToRect=null,o.thisAnimationDuration=null},i),o.thisAnimationDuration=i)}),clearTimeout(i),n?i=setTimeout(function(){"function"==typeof t&&t()},r):"function"==typeof t&&t(),o=[]},animate:function(t,e,i,o){if(o){Mt(t,"transition",""),Mt(t,"transform","");var n=Nt(this.el),r=n&&n.a,a=n&&n.d,s=(e.left-i.left)/(r||1),l=(e.top-i.top)/(a||1);t.animatingX=!!s,t.animatingY=!!l,Mt(t,"transform","translate3d("+s+"px,"+l+"px,0)"),this.forRepaintDummy=function(t){return t.offsetWidth}(t),Mt(t,"transition","transform "+o+"ms"+(this.options.easing?" "+this.options.easing:"")),Mt(t,"transform","translate3d(0,0,0)"),"number"==typeof t.animated&&clearTimeout(t.animated),t.animated=setTimeout(function(){Mt(t,"transition",""),Mt(t,"transform",""),t.animated=!1,t.animatingX=!1,t.animatingY=!1},o)}}}))}function We(t,e,i,o,n,r,a,s){var l,c,d=t[Gt],h=d.options.onMove;return!window.CustomEvent||bt||yt?(l=document.createEvent("Event")).initEvent("move",!0,!0):l=new CustomEvent("move",{bubbles:!0,cancelable:!0}),l.to=e,l.from=t,l.dragged=i,l.draggedRect=o,l.related=n||e,l.relatedRect=r||Ut(e),l.willInsertAfter=s,l.originalEvent=a,t.dispatchEvent(l),h&&(c=h.call(d,l,a)),c}function Ve(t){t.draggable=!1}function Ge(){Me=!1}function Ze(t){for(var e=t.tagName+t.className+t.src+t.href+t.textContent,i=e.length,o=0;i--;)o+=e.charCodeAt(i);return o.toString(36)}function Ke(t){return setTimeout(t,0)}function Qe(t){return clearTimeout(t)}Fe.prototype={constructor:Fe,_isOutsideThisEl:function(t){this.el.contains(t)||t===this.el||(Se=null)},_getDirection:function(t,e){return"function"==typeof this.options.direction?this.options.direction.call(this,t,e,ie):this.options.direction},_onTapStart:function(t){if(t.cancelable){var e=this,i=this.el,o=this.options,n=o.preventOnFilter,r=t.type,a=t.touches&&t.touches[0]||t.pointerType&&"touch"===t.pointerType&&t,s=(a||t).target,l=t.target.shadowRoot&&(t.path&&t.path[0]||t.composedPath&&t.composedPath()[0])||s,c=o.filter;if(function(t){Ne.length=0;for(var e=t.getElementsByTagName("input"),i=e.length;i--;){var o=e[i];o.checked&&Ne.push(o)}}(i),!ie&&!(/mousedown|pointerdown/.test(r)&&0!==t.button||o.disabled)&&!l.isContentEditable&&(this.nativeDraggable||!wt||!s||"SELECT"!==s.tagName.toUpperCase())&&!((s=Tt(s,o.draggable,i,!1))&&s.animated||se===s)){if(de=Bt(s),ue=Bt(s,o.draggable),"function"==typeof c){if(c.call(this,t,s,this))return ee({sortable:e,rootEl:l,name:"filter",targetEl:s,toEl:i,fromEl:i}),te("filter",e,{evt:t}),void(n&&t.preventDefault())}else if(c&&(c=c.split(",").some(function(o){if(o=Tt(l,o.trim(),i,!1))return ee({sortable:e,rootEl:o,name:"filter",targetEl:s,fromEl:i,toEl:i}),te("filter",e,{evt:t}),!0})))return void(n&&t.preventDefault());o.handle&&!Tt(l,o.handle,i,!1)||this._prepareDragStart(t,a,s)}}},_prepareDragStart:function(t,e,i){var o,n=this,r=n.el,a=n.options,s=r.ownerDocument;if(i&&!ie&&i.parentNode===r){var l=Ut(i);if(re=r,oe=(ie=i).parentNode,ae=ie.nextSibling,se=i,fe=a.group,Fe.dragged=ie,ve={target:ie,clientX:(e||t).clientX,clientY:(e||t).clientY},_e=ve.clientX-l.left,we=ve.clientY-l.top,this._lastX=(e||t).clientX,this._lastY=(e||t).clientY,ie.style["will-change"]="all",o=function(){te("delayEnded",n,{evt:t}),Fe.eventCanceled?n._onDrop():(n._disableDelayedDragEvents(),!_t&&n.nativeDraggable&&(ie.draggable=!0),n._triggerDragStart(t,e),ee({sortable:n,name:"choose",originalEvent:t}),Ot(ie,a.chosenClass,!0))},a.ignore.split(",").forEach(function(t){It(ie,t.trim(),Ve)}),At(s,"dragover",Xe),At(s,"mousemove",Xe),At(s,"touchmove",Xe),a.supportPointer?(At(s,"pointerup",n._onDrop),!this.nativeDraggable&&At(s,"pointercancel",n._onDrop)):(At(s,"mouseup",n._onDrop),At(s,"touchend",n._onDrop),At(s,"touchcancel",n._onDrop)),_t&&this.nativeDraggable&&(this.options.touchStartThreshold=4,ie.draggable=!0),te("delayStart",this,{evt:t}),!a.delay||a.delayOnTouchOnly&&!e||this.nativeDraggable&&(yt||bt))o();else{if(Fe.eventCanceled)return void this._onDrop();a.supportPointer?(At(s,"pointerup",n._disableDelayedDrag),At(s,"pointercancel",n._disableDelayedDrag)):(At(s,"mouseup",n._disableDelayedDrag),At(s,"touchend",n._disableDelayedDrag),At(s,"touchcancel",n._disableDelayedDrag)),At(s,"mousemove",n._delayedDragTouchMoveHandler),At(s,"touchmove",n._delayedDragTouchMoveHandler),a.supportPointer&&At(s,"pointermove",n._delayedDragTouchMoveHandler),n._dragStartTimer=setTimeout(o,a.delay)}}},_delayedDragTouchMoveHandler:function(t){var e=t.touches?t.touches[0]:t;Math.max(Math.abs(e.clientX-this._lastX),Math.abs(e.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){ie&&Ve(ie),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var t=this.el.ownerDocument;xt(t,"mouseup",this._disableDelayedDrag),xt(t,"touchend",this._disableDelayedDrag),xt(t,"touchcancel",this._disableDelayedDrag),xt(t,"pointerup",this._disableDelayedDrag),xt(t,"pointercancel",this._disableDelayedDrag),xt(t,"mousemove",this._delayedDragTouchMoveHandler),xt(t,"touchmove",this._delayedDragTouchMoveHandler),xt(t,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(t,e){e=e||"touch"==t.pointerType&&t,!this.nativeDraggable||e?this.options.supportPointer?At(document,"pointermove",this._onTouchMove):At(document,e?"touchmove":"mousemove",this._onTouchMove):(At(ie,"dragend",this),At(re,"dragstart",this._onDragStart));try{document.selection?Ke(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch(t){}},_dragStarted:function(t,e){if(De=!1,re&&ie){te("dragStarted",this,{evt:e}),this.nativeDraggable&&At(document,"dragover",Ye);var i=this.options;!t&&Ot(ie,i.dragClass,!1),Ot(ie,i.ghostClass,!0),Fe.active=this,t&&this._appendGhost(),ee({sortable:this,name:"start",originalEvent:e})}else this._nulling()},_emulateDragOver:function(){if(me){this._lastX=me.clientX,this._lastY=me.clientY,ze();for(var t=document.elementFromPoint(me.clientX,me.clientY),e=t;t&&t.shadowRoot&&(t=t.shadowRoot.elementFromPoint(me.clientX,me.clientY))!==e;)e=t;if(ie.parentNode[Gt]._isOutsideThisEl(t),e)do{if(e[Gt]&&e[Gt]._onDragOver({clientX:me.clientX,clientY:me.clientY,target:t,rootEl:e})&&!this.options.dragoverBubble)break;t=e}while(e=Ct(e));qe()}},_onTouchMove:function(t){if(ve){var e=this.options,i=e.fallbackTolerance,o=e.fallbackOffset,n=t.touches?t.touches[0]:t,r=ne&&Nt(ne,!0),a=ne&&r&&r.a,s=ne&&r&&r.d,l=Re&&xe&&zt(xe),c=(n.clientX-ve.clientX+o.x)/(a||1)+(l?l[0]-Oe[0]:0)/(a||1),d=(n.clientY-ve.clientY+o.y)/(s||1)+(l?l[1]-Oe[1]:0)/(s||1);if(!Fe.active&&!De){if(i&&Math.max(Math.abs(n.clientX-this._lastX),Math.abs(n.clientY-this._lastY))<i)return;this._onDragStart(t,!0)}if(ne){r?(r.e+=c-(be||0),r.f+=d-(ye||0)):r={a:1,b:0,c:0,d:1,e:c,f:d};var h="matrix(".concat(r.a,",").concat(r.b,",").concat(r.c,",").concat(r.d,",").concat(r.e,",").concat(r.f,")");Mt(ne,"webkitTransform",h),Mt(ne,"mozTransform",h),Mt(ne,"msTransform",h),Mt(ne,"transform",h),be=c,ye=d,me=n}t.cancelable&&t.preventDefault()}},_appendGhost:function(){if(!ne){var t=this.options.fallbackOnBody?document.body:re,e=Ut(ie,!0,Re,!0,t),i=this.options;if(Re){for(xe=t;"static"===Mt(xe,"position")&&"none"===Mt(xe,"transform")&&xe!==document;)xe=xe.parentNode;xe!==document.body&&xe!==document.documentElement?(xe===document&&(xe=Rt()),e.top+=xe.scrollTop,e.left+=xe.scrollLeft):xe=Rt(),Oe=zt(xe)}Ot(ne=ie.cloneNode(!0),i.ghostClass,!1),Ot(ne,i.fallbackClass,!0),Ot(ne,i.dragClass,!0),Mt(ne,"transition",""),Mt(ne,"transform",""),Mt(ne,"box-sizing","border-box"),Mt(ne,"margin",0),Mt(ne,"top",e.top),Mt(ne,"left",e.left),Mt(ne,"width",e.width),Mt(ne,"height",e.height),Mt(ne,"opacity","0.8"),Mt(ne,"position",Re?"absolute":"fixed"),Mt(ne,"zIndex","100000"),Mt(ne,"pointerEvents","none"),Fe.ghost=ne,t.appendChild(ne),Mt(ne,"transform-origin",_e/parseInt(ne.style.width)*100+"% "+we/parseInt(ne.style.height)*100+"%")}},_onDragStart:function(t,e){var i=this,o=t.dataTransfer,n=i.options;te("dragStart",this,{evt:t}),Fe.eventCanceled?this._onDrop():(te("setupClone",this),Fe.eventCanceled||((le=Wt(ie)).removeAttribute("id"),le.draggable=!1,le.style["will-change"]="",this._hideClone(),Ot(le,this.options.chosenClass,!1),Fe.clone=le),i.cloneId=Ke(function(){te("clone",i),Fe.eventCanceled||(i.options.removeCloneOnHide||re.insertBefore(le,ie),i._hideClone(),ee({sortable:i,name:"clone"}))}),!e&&Ot(ie,n.dragClass,!0),e?(Ce=!0,i._loopId=setInterval(i._emulateDragOver,50)):(xt(document,"mouseup",i._onDrop),xt(document,"touchend",i._onDrop),xt(document,"touchcancel",i._onDrop),o&&(o.effectAllowed="move",n.setData&&n.setData.call(i,o,ie)),At(document,"drop",i),Mt(ie,"transform","translateZ(0)")),De=!0,i._dragStartId=Ke(i._dragStarted.bind(i,e,t)),At(document,"selectstart",i),Ee=!0,window.getSelection().removeAllRanges(),wt&&Mt(document.body,"user-select","none"))},_onDragOver:function(t){var e,i,o,n,r=this.el,a=t.target,s=this.options,l=s.group,c=Fe.active,d=fe===l,h=s.sort,u=ge||c,p=this,f=!1;if(!Me){if(void 0!==t.preventDefault&&t.cancelable&&t.preventDefault(),a=Tt(a,s.draggable,r,!0),T("dragOver"),Fe.eventCanceled)return f;if(ie.contains(t.target)||a.animated&&a.animatingX&&a.animatingY||p._ignoreWhileAnimating===a)return P(!1);if(Ce=!1,c&&!s.disabled&&(d?h||(o=oe!==re):ge===this||(this.lastPutMode=fe.checkPull(this,c,ie,t))&&l.checkPut(this,c,ie,t))){if(n="vertical"===this._getDirection(t,a),e=Ut(ie),T("dragOverValid"),Fe.eventCanceled)return f;if(o)return oe=re,k(),this._hideClone(),T("revert"),Fe.eventCanceled||(ae?re.insertBefore(ie,ae):re.appendChild(ie)),P(!0);var g=Lt(r,s.draggable);if(!g||function(t,e,i){var o=Ut(Lt(i.el,i.options.draggable)),n=Vt(i.el,i.options,ne);return e?t.clientX>n.right+10||t.clientY>o.bottom&&t.clientX>o.left:t.clientY>n.bottom+10||t.clientX>o.right&&t.clientY>o.top}(t,n,this)&&!g.animated){if(g===ie)return P(!1);if(g&&r===t.target&&(a=g),a&&(i=Ut(a)),!1!==We(re,r,ie,e,a,i,t,!!a))return k(),g&&g.nextSibling?r.insertBefore(ie,g.nextSibling):r.appendChild(ie),oe=r,O(),P(!0)}else if(g&&function(t,e,i){var o=Ut(jt(i.el,0,i.options,!0)),n=Vt(i.el,i.options,ne);return e?t.clientX<n.left-10||t.clientY<o.top&&t.clientX<o.right:t.clientY<n.top-10||t.clientY<o.bottom&&t.clientX<o.left}(t,n,this)){var v=jt(r,0,s,!0);if(v===ie)return P(!1);if(i=Ut(a=v),!1!==We(re,r,ie,e,a,i,t,!1))return k(),r.insertBefore(ie,v),oe=r,O(),P(!0)}else if(a.parentNode===r){i=Ut(a);var m,b,y,_=ie.parentNode!==r,w=!function(t,e,i){var o=i?t.left:t.top,n=i?t.right:t.bottom,r=i?t.width:t.height,a=i?e.left:e.top,s=i?e.right:e.bottom,l=i?e.width:e.height;return o===a||n===s||o+r/2===a+l/2}(ie.animated&&ie.toRect||e,a.animated&&a.toRect||i,n),E=n?"top":"left",S=Ht(a,"top","top")||Ht(ie,"top","top"),$=S?S.scrollTop:void 0;if(Se!==a&&(b=i[E],ke=!1,Pe=!w&&s.invertSwap||_),m=function(t,e,i,o,n,r,a,s){var l=o?t.clientY:t.clientX,c=o?i.height:i.width,d=o?i.top:i.left,h=o?i.bottom:i.right,u=!1;if(!a)if(s&&Ae<c*n){if(!ke&&(1===$e?l>d+c*r/2:l<h-c*r/2)&&(ke=!0),ke)u=!0;else if(1===$e?l<d+Ae:l>h-Ae)return-$e}else if(l>d+c*(1-n)/2&&l<h-c*(1-n)/2)return function(t){return Bt(ie)<Bt(t)?1:-1}(e);return(u=u||a)&&(l<d+c*r/2||l>h-c*r/2)?l>d+c/2?1:-1:0}(t,a,i,n,w?1:s.swapThreshold,null==s.invertedSwapThreshold?s.swapThreshold:s.invertedSwapThreshold,Pe,Se===a),0!==m){var A=Bt(ie);do{A-=m,y=oe.children[A]}while(y&&("none"===Mt(y,"display")||y===ne))}if(0===m||y===a)return P(!1);Se=a,$e=m;var x=a.nextElementSibling,D=!1,C=We(re,r,ie,e,a,i,t,D=1===m);if(!1!==C)return 1!==C&&-1!==C||(D=1===C),Me=!0,setTimeout(Ge,30),k(),D&&!x?r.appendChild(ie):a.parentNode.insertBefore(ie,D?x:a),S&&Ft(S,0,$-S.scrollTop),oe=ie.parentNode,void 0===b||Pe||(Ae=Math.abs(b-Ut(a)[E])),O(),P(!0)}if(r.contains(ie))return P(!1)}return!1}function T(s,l){te(s,p,pt({evt:t,isOwner:d,axis:n?"vertical":"horizontal",revert:o,dragRect:e,targetRect:i,canSort:h,fromSortable:u,target:a,completed:P,onMove:function(i,o){return We(re,r,ie,e,i,Ut(i),t,o)},changed:O},l))}function k(){T("dragOverAnimationCapture"),p.captureAnimationState(),p!==u&&u.captureAnimationState()}function P(e){return T("dragOverCompleted",{insertion:e}),e&&(d?c._hideClone():c._showClone(p),p!==u&&(Ot(ie,ge?ge.options.ghostClass:c.options.ghostClass,!1),Ot(ie,s.ghostClass,!0)),ge!==p&&p!==Fe.active?ge=p:p===Fe.active&&ge&&(ge=null),u===p&&(p._ignoreWhileAnimating=a),p.animateAll(function(){T("dragOverAnimationComplete"),p._ignoreWhileAnimating=null}),p!==u&&(u.animateAll(),u._ignoreWhileAnimating=null)),(a===ie&&!ie.animated||a===r&&!a.animated)&&(Se=null),s.dragoverBubble||t.rootEl||a===document||(ie.parentNode[Gt]._isOutsideThisEl(t.target),!e&&Xe(t)),!s.dragoverBubble&&t.stopPropagation&&t.stopPropagation(),f=!0}function O(){he=Bt(ie),pe=Bt(ie,s.draggable),ee({sortable:p,name:"change",toEl:r,newIndex:he,newDraggableIndex:pe,originalEvent:t})}},_ignoreWhileAnimating:null,_offMoveEvents:function(){xt(document,"mousemove",this._onTouchMove),xt(document,"touchmove",this._onTouchMove),xt(document,"pointermove",this._onTouchMove),xt(document,"dragover",Xe),xt(document,"mousemove",Xe),xt(document,"touchmove",Xe)},_offUpEvents:function(){var t=this.el.ownerDocument;xt(t,"mouseup",this._onDrop),xt(t,"touchend",this._onDrop),xt(t,"pointerup",this._onDrop),xt(t,"pointercancel",this._onDrop),xt(t,"touchcancel",this._onDrop),xt(document,"selectstart",this)},_onDrop:function(t){var e=this.el,i=this.options;he=Bt(ie),pe=Bt(ie,i.draggable),te("drop",this,{evt:t}),oe=ie&&ie.parentNode,he=Bt(ie),pe=Bt(ie,i.draggable),Fe.eventCanceled||(De=!1,Pe=!1,ke=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),Qe(this.cloneId),Qe(this._dragStartId),this.nativeDraggable&&(xt(document,"drop",this),xt(e,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),wt&&Mt(document.body,"user-select",""),Mt(ie,"transform",""),t&&(Ee&&(t.cancelable&&t.preventDefault(),!i.dropBubble&&t.stopPropagation()),ne&&ne.parentNode&&ne.parentNode.removeChild(ne),(re===oe||ge&&"clone"!==ge.lastPutMode)&&le&&le.parentNode&&le.parentNode.removeChild(le),ie&&(this.nativeDraggable&&xt(ie,"dragend",this),Ve(ie),ie.style["will-change"]="",Ee&&!De&&Ot(ie,ge?ge.options.ghostClass:this.options.ghostClass,!1),Ot(ie,this.options.chosenClass,!1),ee({sortable:this,name:"unchoose",toEl:oe,newIndex:null,newDraggableIndex:null,originalEvent:t}),re!==oe?(he>=0&&(ee({rootEl:oe,name:"add",toEl:oe,fromEl:re,originalEvent:t}),ee({sortable:this,name:"remove",toEl:oe,originalEvent:t}),ee({rootEl:oe,name:"sort",toEl:oe,fromEl:re,originalEvent:t}),ee({sortable:this,name:"sort",toEl:oe,originalEvent:t})),ge&&ge.save()):he!==de&&he>=0&&(ee({sortable:this,name:"update",toEl:oe,originalEvent:t}),ee({sortable:this,name:"sort",toEl:oe,originalEvent:t})),Fe.active&&(null!=he&&-1!==he||(he=de,pe=ue),ee({sortable:this,name:"end",toEl:oe,originalEvent:t}),this.save())))),this._nulling()},_nulling:function(){te("nulling",this),re=ie=oe=ne=ae=le=se=ce=ve=me=Ee=he=pe=de=ue=Se=$e=ge=fe=Fe.dragged=Fe.ghost=Fe.clone=Fe.active=null,Ne.forEach(function(t){t.checked=!0}),Ne.length=be=ye=0},handleEvent:function(t){switch(t.type){case"drop":case"dragend":this._onDrop(t);break;case"dragenter":case"dragover":ie&&(this._onDragOver(t),function(t){t.dataTransfer&&(t.dataTransfer.dropEffect="move"),t.cancelable&&t.preventDefault()}(t));break;case"selectstart":t.preventDefault()}},toArray:function(){for(var t,e=[],i=this.el.children,o=0,n=i.length,r=this.options;o<n;o++)Tt(t=i[o],r.draggable,this.el,!1)&&e.push(t.getAttribute(r.dataIdAttr)||Ze(t));return e},sort:function(t,e){var i={},o=this.el;this.toArray().forEach(function(t,e){var n=o.children[e];Tt(n,this.options.draggable,o,!1)&&(i[t]=n)},this),e&&this.captureAnimationState(),t.forEach(function(t){i[t]&&(o.removeChild(i[t]),o.appendChild(i[t]))}),e&&this.animateAll()},save:function(){var t=this.options.store;t&&t.set&&t.set(this)},closest:function(t,e){return Tt(t,e||this.options.draggable,this.el,!1)},option:function(t,e){var i=this.options;if(void 0===e)return i[t];var o=Qt.modifyOption(this,t,e);i[t]=void 0!==o?o:e,"group"===t&&Be(i)},destroy:function(){te("destroy",this);var t=this.el;t[Gt]=null,xt(t,"mousedown",this._onTapStart),xt(t,"touchstart",this._onTapStart),xt(t,"pointerdown",this._onTapStart),this.nativeDraggable&&(xt(t,"dragover",this),xt(t,"dragenter",this)),Array.prototype.forEach.call(t.querySelectorAll("[draggable]"),function(t){t.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),Te.splice(Te.indexOf(this.el),1),this.el=t=null},_hideClone:function(){if(!ce){if(te("hideClone",this),Fe.eventCanceled)return;Mt(le,"display","none"),this.options.removeCloneOnHide&&le.parentNode&&le.parentNode.removeChild(le),ce=!0}},_showClone:function(t){if("clone"===t.lastPutMode){if(ce){if(te("showClone",this),Fe.eventCanceled)return;ie.parentNode!=re||this.options.group.revertClone?ae?re.insertBefore(le,ae):re.appendChild(le):re.insertBefore(le,ie),this.options.group.revertClone&&this.animate(ie,le),Mt(le,"display",""),ce=!1}}else this._hideClone()}},Ie&&At(document,"touchmove",function(t){(Fe.active||De)&&t.cancelable&&t.preventDefault()}),Fe.utils={on:At,off:xt,css:Mt,find:It,is:function(t,e){return!!Tt(t,e,t,!1)},extend:function(t,e){if(t&&e)for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);return t},throttle:Yt,closest:Tt,toggleClass:Ot,clone:Wt,index:Bt,nextTick:Ke,cancelNextTick:Qe,detectDirection:Le,getChild:jt,expando:Gt},Fe.get=function(t){return t[Gt]},Fe.mount=function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];e[0].constructor===Array&&(e=e[0]),e.forEach(function(t){if(!t.prototype||!t.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(t));t.utils&&(Fe.utils=pt(pt({},Fe.utils),t.utils)),Qt.mount(t)})},Fe.create=function(t,e){return new Fe(t,e)},Fe.version="1.15.6";var Je,ti,ei,ii,oi,ni,ri=[],ai=!1;function si(){ri.forEach(function(t){clearInterval(t.pid)}),ri=[]}function li(){clearInterval(ni)}var ci=Yt(function(t,e,i,o){if(e.scroll){var n,r=(t.touches?t.touches[0]:t).clientX,a=(t.touches?t.touches[0]:t).clientY,s=e.scrollSensitivity,l=e.scrollSpeed,c=Rt(),d=!1;ti!==i&&(ti=i,si(),Je=e.scroll,n=e.scrollFn,!0===Je&&(Je=qt(i,!0)));var h=0,u=Je;do{var p=u,f=Ut(p),g=f.top,v=f.bottom,m=f.left,b=f.right,y=f.width,_=f.height,w=void 0,E=void 0,S=p.scrollWidth,$=p.scrollHeight,A=Mt(p),x=p.scrollLeft,D=p.scrollTop;p===c?(w=y<S&&("auto"===A.overflowX||"scroll"===A.overflowX||"visible"===A.overflowX),E=_<$&&("auto"===A.overflowY||"scroll"===A.overflowY||"visible"===A.overflowY)):(w=y<S&&("auto"===A.overflowX||"scroll"===A.overflowX),E=_<$&&("auto"===A.overflowY||"scroll"===A.overflowY));var C=w&&(Math.abs(b-r)<=s&&x+y<S)-(Math.abs(m-r)<=s&&!!x),T=E&&(Math.abs(v-a)<=s&&D+_<$)-(Math.abs(g-a)<=s&&!!D);if(!ri[h])for(var k=0;k<=h;k++)ri[k]||(ri[k]={});ri[h].vx==C&&ri[h].vy==T&&ri[h].el===p||(ri[h].el=p,ri[h].vx=C,ri[h].vy=T,clearInterval(ri[h].pid),0==C&&0==T||(d=!0,ri[h].pid=setInterval(function(){o&&0===this.layer&&Fe.active._onTouchMove(oi);var e=ri[this.layer].vy?ri[this.layer].vy*l:0,i=ri[this.layer].vx?ri[this.layer].vx*l:0;"function"==typeof n&&"continue"!==n.call(Fe.dragged.parentNode[Gt],i,e,t,oi,ri[this.layer].el)||Ft(ri[this.layer].el,i,e)}.bind({layer:h}),24))),h++}while(e.bubbleScroll&&u!==c&&(u=qt(u,!1)));ai=d}},30),di=function(t){var e=t.originalEvent,i=t.putSortable,o=t.dragEl,n=t.activeSortable,r=t.dispatchSortableEvent,a=t.hideGhostForTarget,s=t.unhideGhostForTarget;if(e){var l=i||n;a();var c=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:e,d=document.elementFromPoint(c.clientX,c.clientY);s(),l&&!l.el.contains(d)&&(r("spill"),this.onSpill({dragEl:o,putSortable:i}))}};function hi(){}function ui(){}hi.prototype={startIndex:null,dragStart:function(t){var e=t.oldDraggableIndex;this.startIndex=e},onSpill:function(t){var e=t.dragEl,i=t.putSortable;this.sortable.captureAnimationState(),i&&i.captureAnimationState();var o=jt(this.sortable.el,this.startIndex,this.options);o?this.sortable.el.insertBefore(e,o):this.sortable.el.appendChild(e),this.sortable.animateAll(),i&&i.animateAll()},drop:di},vt(hi,{pluginName:"revertOnSpill"}),ui.prototype={onSpill:function(t){var e=t.dragEl,i=t.putSortable||this.sortable;i.captureAnimationState(),e.parentNode&&e.parentNode.removeChild(e),i.animateAll()},drop:di},vt(ui,{pluginName:"removeOnSpill"}),Fe.mount(new function(){function t(){for(var t in this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0},this)"_"===t.charAt(0)&&"function"==typeof this[t]&&(this[t]=this[t].bind(this))}return t.prototype={dragStarted:function(t){var e=t.originalEvent;this.sortable.nativeDraggable?At(document,"dragover",this._handleAutoScroll):this.options.supportPointer?At(document,"pointermove",this._handleFallbackAutoScroll):e.touches?At(document,"touchmove",this._handleFallbackAutoScroll):At(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(t){var e=t.originalEvent;this.options.dragOverBubble||e.rootEl||this._handleAutoScroll(e)},drop:function(){this.sortable.nativeDraggable?xt(document,"dragover",this._handleAutoScroll):(xt(document,"pointermove",this._handleFallbackAutoScroll),xt(document,"touchmove",this._handleFallbackAutoScroll),xt(document,"mousemove",this._handleFallbackAutoScroll)),li(),si(),clearTimeout(kt),kt=void 0},nulling:function(){oi=ti=Je=ai=ni=ei=ii=null,ri.length=0},_handleFallbackAutoScroll:function(t){this._handleAutoScroll(t,!0)},_handleAutoScroll:function(t,e){var i=this,o=(t.touches?t.touches[0]:t).clientX,n=(t.touches?t.touches[0]:t).clientY,r=document.elementFromPoint(o,n);if(oi=t,e||this.options.forceAutoScrollFallback||yt||bt||wt){ci(t,this.options,r,e);var a=qt(r,!0);!ai||ni&&o===ei&&n===ii||(ni&&li(),ni=setInterval(function(){var r=qt(document.elementFromPoint(o,n),!0);r!==a&&(a=r,si()),ci(t,i.options,r,e)},10),ei=o,ii=n)}else{if(!this.options.bubbleScroll||qt(r,!0)===Rt())return void si();ci(t,this.options,qt(r,!1),!1)}}},vt(t,{pluginName:"scroll",initializeByDefault:!0})}),Fe.mount(ui,hi);const pi=Fe;var fi=function(t,e,i,o){var n,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,o);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(a=(r<3?n(a):r>3?n(e,i,a):n(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};let gi=class extends at{constructor(){super(...arguments),this.queueTracks=[],this.queuePosition=null,this.queueSize=0,this.isLoading=!0,this.error=null,this.isDragging=!1,this.dragStartPosition=null,this._sortableInstance=null,this._pendingOperations=new Set}connectedCallback(){super.connectedCallback(),this._subscribeEntities()}disconnectedCallback(){super.disconnectedCallback(),this._unsubEntities&&this._unsubEntities(),this._sortableInstance&&this._sortableInstance.destroy()}_subscribeEntities(){if(!this.hass||!this.config?.entity)return;this._unsubEntities=this.hass.connection.subscribeEntities(t=>{const e=t[this.config.entity];e&&this._updateEntityState(e)});const t=this.hass.states[this.config.entity];t&&this._updateEntityState(t)}_updateEntityState(t){this.queueTracks=t.attributes.queue_tracks||[],this.queuePosition=t.attributes.queue_position??null,this.queueSize=t.attributes.queue_size||0,this.isLoading=!1,"unavailable"===t.state?this.error="Entity unavailable":this.error=null,this.requestUpdate()}_retry(){this.error=null,this.isLoading=!0,this._unsubEntities&&this._unsubEntities(),this._subscribeEntities()}_formatMetadata(t,e){return t||e}render(){return this.config&&this.hass?this.isLoading?z`
        <ha-card>
          <div class="card-content loading">
            <div class="spinner"></div>
            <div>Loading queue...</div>
          </div>
        </ha-card>
      `:this.error?z`
        <ha-card>
          <div class="card-content error-state">
            <div class="error-message">${this.error}</div>
            <button class="retry-button" @click=${this._retry}>Retry</button>
          </div>
        </ha-card>
      `:0===this.queueSize?z`
        <ha-card>
          <div class="card-content">
            ${this.config.title?z`<div class="card-header">${this.config.title}</div>`:""}
            <div class="empty-state">Queue is empty</div>
          </div>
        </ha-card>
      `:z`
      <ha-card>
        <div class="card-content">
          ${this.config.title?z`<div class="card-header">${this.config.title}</div>`:""}
          <div class="queue-list" id="queue-list">
            ${this.queueTracks.map((t,e)=>this._renderTrack(t,e))}
          </div>
        </div>
      </ha-card>
    `:z`<div class="error">Card not configured</div>`}_renderTrack(t,e){const i=t.position===this.queuePosition,o=t.position,n=this._formatMetadata(t.title,"Unknown Title"),r=this._formatMetadata(t.artist,"Unknown Artist"),a=this._formatMetadata(t.album,"Unknown Album"),s=t.duration?this._formatDuration(t.duration):"";return z`
      <div 
        class="track-item ${i?"playing":""}" 
        data-position="${o}"
        @click=${t=>this._handleTrackClick(t,o)}
        @touchend=${t=>this._handleTrackClick(t,o)}
      >
        <div class="track-position">${o}</div>
        <div class="track-info">
          <div class="track-title">${n}</div>
          <div class="track-artist">${r}</div>
          ${"Unknown Album"!==a?z`<div class="track-album">${a}</div>`:""}
        </div>
        ${s?z`<div class="track-duration">${s}</div>`:""}
        ${i?z`<div class="playing-indicator"></div>`:""}
      </div>
    `}_formatDuration(t){return`${Math.floor(t/60)}:${(t%60).toString().padStart(2,"0")}`}firstUpdated(){this._initSortable()}updated(t){super.updated(t),t.has("queueTracks")&&this._initSortable()}_initSortable(){const t=this.shadowRoot?.getElementById("queue-list");t&&(this._sortableInstance&&(this._sortableInstance.destroy(),this._sortableInstance=null),this._sortableInstance=pi.create(t,{animation:150,ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",forceFallback:!1,fallbackTolerance:10,onStart:t=>{this.isDragging=!0,this.dragStartPosition=parseInt(t.item.getAttribute("data-position")||"0")},onEnd:t=>{this.isDragging=!1;const e=this.dragStartPosition,i=t.newIndex??-1,o=i>=0?i+1:e;e&&o&&e!==o&&this._moveTrack(e,o),this.dragStartPosition=null}}))}_handleTrackClick(t,e){this.isDragging||(t.preventDefault(),t.stopPropagation(),this._playTrackAtPosition(e))}async _moveTrack(t,e){this._pendingOperations.size>0&&await Promise.allSettled(Array.from(this._pendingOperations));const i=(async()=>{try{await this.hass.callService("mopidy","move_track",{from_position:t,to_position:e},{entity_id:this.config.entity})}catch(t){const e=t?.message||t?.code||"Unknown error";e.includes("network")||e.includes("connection")?this.error="Network error: Unable to connect to Mopidy server. Please check your connection.":e.includes("timeout")?this.error="Request timed out. The Mopidy server may be slow to respond.":e.includes("invalid")||e.includes("range")?this.error="Invalid position: Track positions may have changed. Please refresh.":this.error=`Failed to move track: ${e}`}finally{setTimeout(()=>{this.isDragging=!1},300)}})();this._pendingOperations.add(i),await i,this._pendingOperations.delete(i)}async _playTrackAtPosition(t){const e=this.isLoading;this.isLoading=!0;const i=(async()=>{try{await this.hass.callService("mopidy","play_track_at_position",{position:t},{entity_id:this.config.entity})}catch(e){const i=e?.message||e?.code||"Unknown error";i.includes("network")||i.includes("connection")?this.error="Network error: Unable to connect to Mopidy server. Please check your connection.":i.includes("timeout")?this.error="Request timed out. The Mopidy server may be slow to respond.":i.includes("invalid")||i.includes("range")||i.includes("empty")?this.error=`Invalid position: Track may no longer exist at position ${t}. Please refresh.`:this.error=`Failed to play track: ${i}`}finally{setTimeout(()=>{this.isLoading=e},500)}})();this._pendingOperations.add(i),await i,this._pendingOperations.delete(i)}};gi.styles=((t,...e)=>{const o=1===t.length?t[0]:e.reduce((e,i,o)=>e+(t=>{if(!0===t._$cssResult$)return t.cssText;if("number"==typeof t)return t;throw Error("Value passed to 'css' function must be a 'css' function result: "+t+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(i)+t[o+1],t[0]);return new n(o,t,i)})`
    ha-card {
      padding: 16px;
    }

    .card-content {
      display: flex;
      flex-direction: column;
    }

    .card-header {
      font-size: 18px;
      font-weight: 500;
      margin-bottom: 16px;
      color: var(--primary-text-color, #000);
    }

    .loading {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      padding: 40px;
      gap: 16px;
    }

    .spinner {
      width: 40px;
      height: 40px;
      border: 4px solid var(--divider-color, #e0e0e0);
      border-top-color: var(--primary-color, #03a9f4);
      border-radius: 50%;
      animation: spin 1s linear infinite;
    }

    @keyframes spin {
      to {
        transform: rotate(360deg);
      }
    }

    .error-state {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      padding: 40px;
      gap: 16px;
    }

    .error-message {
      color: var(--error-color, #f44336);
      text-align: center;
    }

    .retry-button {
      padding: 8px 16px;
      background-color: var(--primary-color, #03a9f4);
      color: white;
      border: none;
      border-radius: 4px;
      cursor: pointer;
    }

    .retry-button:hover {
      opacity: 0.8;
    }

    .empty-state {
      text-align: center;
      padding: 40px;
      color: var(--secondary-text-color, #666);
    }

    .queue-list {
      display: flex;
      flex-direction: column;
      gap: 8px;
      overflow-y: auto;
    }

    .track-item {
      display: flex;
      align-items: center;
      gap: 12px;
      padding: 12px;
      border: 1px solid var(--divider-color, #e0e0e0);
      border-radius: 4px;
      background-color: var(--card-background-color, #fff);
      cursor: pointer;
      transition: background-color 0.2s;
    }

    .track-item:hover {
      background-color: var(--secondary-background-color, #f5f5f5);
    }

    .track-item.playing {
      background-color: var(--primary-color, #03a9f4);
      color: white;
      border-color: var(--primary-color, #03a9f4);
    }

    .track-item.sortable-ghost {
      opacity: 0.4;
    }

    .track-item.sortable-chosen {
      cursor: grabbing;
    }

    .track-position {
      font-weight: 600;
      min-width: 30px;
      text-align: center;
      color: var(--secondary-text-color, #666);
    }

    .track-item.playing .track-position {
      color: white;
    }

    .track-info {
      flex: 1;
      min-width: 0;
    }

    .track-title {
      font-weight: 500;
      margin-bottom: 4px;
      overflow: hidden;
      text-overflow: ellipsis;
      white-space: nowrap;
    }

    .track-artist {
      font-size: 0.9em;
      color: var(--secondary-text-color, #666);
      overflow: hidden;
      text-overflow: ellipsis;
      white-space: nowrap;
    }

    .track-item.playing .track-artist {
      color: rgba(255, 255, 255, 0.9);
    }

    .track-album {
      font-size: 0.85em;
      color: var(--secondary-text-color, #666);
      margin-top: 2px;
      overflow: hidden;
      text-overflow: ellipsis;
      white-space: nowrap;
    }

    .track-item.playing .track-album {
      color: rgba(255, 255, 255, 0.8);
    }

    .track-duration {
      font-size: 0.9em;
      color: var(--secondary-text-color, #666);
      min-width: 50px;
      text-align: right;
    }

    .track-item.playing .track-duration {
      color: white;
    }

    .playing-indicator {
      font-size: 1.2em;
      color: var(--primary-color, #03a9f4);
      min-width: 24px;
      text-align: center;
    }

    .track-item.playing .playing-indicator {
      color: white;
    }
  `,fi([dt({attribute:!1})],gi.prototype,"hass",void 0),fi([dt({attribute:!1})],gi.prototype,"config",void 0),fi([ht()],gi.prototype,"queueTracks",void 0),fi([ht()],gi.prototype,"queuePosition",void 0),fi([ht()],gi.prototype,"queueSize",void 0),fi([ht()],gi.prototype,"isLoading",void 0),fi([ht()],gi.prototype,"error",void 0),fi([ht()],gi.prototype,"isDragging",void 0),fi([ht()],gi.prototype,"dragStartPosition",void 0),gi=fi([(t=>(e,i)=>{void 0!==i?i.addInitializer(()=>{customElements.define(t,e)}):customElements.define(t,e)})("mopidy-queue-card")],gi),"undefined"!=typeof window&&window.customCards&&window.customCards.push({type:"mopidy-queue-card",name:"Mopidy Queue Card",description:"Interactive queue management card for Mopidy with drag-and-drop and tap-to-play"});export{gi as MopidyQueueCard};